{"version":3,"file":"/publishable/assets/js/analytics.js","mappings":"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","sources":["webpack:///./resources/assets/js/analytics.js"],"sourcesContent":["// Active Users JS\n!function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p=\"\",i(0)}([function(t,i){\"use strict\";gapi.analytics.ready(function(){gapi.analytics.createComponent(\"ActiveUsers\",{initialize:function(){this.activeUsers=0,gapi.analytics.auth.once(\"signOut\",this.handleSignOut_.bind(this))},execute:function(){this.polling_&&this.stop(),this.render_(),gapi.analytics.auth.isAuthorized()?this.pollActiveUsers_():gapi.analytics.auth.once(\"signIn\",this.pollActiveUsers_.bind(this))},stop:function(){clearTimeout(this.timeout_),this.polling_=!1,this.emit(\"stop\",{activeUsers:this.activeUsers})},render_:function(){var t=this.get();this.container=\"string\"==typeof t.container?document.getElementById(t.container):t.container,this.container.innerHTML=t.template||this.template,this.container.querySelector(\"strong\").innerHTML=this.activeUsers},pollActiveUsers_:function(){var t=this.get(),i=1e3*(t.pollingInterval||5);if(isNaN(i)||5e3>i)throw new Error(\"Frequency must be 5 seconds or more.\");this.polling_=!0,gapi.client.analytics.data.realtime.get({ids:t.ids,metrics:\"rt:activeUsers\"}).then(function(t){var e=t.result,s=e.totalResults?+e.rows[0][0]:0,n=this.activeUsers;this.emit(\"success\",{activeUsers:this.activeUsers}),s!=n&&(this.activeUsers=s,this.onChange_(s-n)),1==this.polling_&&(this.timeout_=setTimeout(this.pollActiveUsers_.bind(this),i))}.bind(this))},onChange_:function(t){var i=this.container.querySelector(\"strong\");i&&(i.innerHTML=this.activeUsers),this.emit(\"change\",{activeUsers:this.activeUsers,delta:t}),t>0?this.emit(\"increase\",{activeUsers:this.activeUsers,delta:t}):this.emit(\"decrease\",{activeUsers:this.activeUsers,delta:t})},handleSignOut_:function(){this.stop(),gapi.analytics.auth.once(\"signIn\",this.handleSignIn_.bind(this))},handleSignIn_:function(){this.pollActiveUsers_(),gapi.analytics.auth.once(\"signOut\",this.handleSignOut_.bind(this))},template:'<div class=\"ActiveUsers\">Active Users <strong class=\"ActiveUsers-value\"></strong></div>'})})}]);\n\ngapi.analytics.ready(function () {\n\n\tgapi.analytics.auth.authorize({\n\t\tcontainer: 'embed-api-auth-container',\n\t\tclientid: google_analytics_client_id\n\t});\n\n\tvar activeUsers = new gapi.analytics.ext.ActiveUsers({\n\t\tcontainer: 'active-users-container',\n\t\tpollingInterval: 5\n\t});\n\n\tactiveUsers.once('success', function () {\n\t\tvar element = this.container.firstChild;\n\t\tvar timeout;\n\t\tdocument.getElementById('embed-api-auth-container').style.display = 'none';\n\t\tthis.on('change', function () {\n\t\t\tvar element = this.container.firstChild;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(function () {\n\t\t\t\telement.className = element.className.replace(/ is-(increasing|decreasing)/g, '');\n\t\t\t}, 3000);\n\t\t});\n\t});\n\n\tvar data = { ids: ids };\n\tactiveUsers.set(data).execute();\n\trenderWeekOverWeekChart();\n\trenderYearOverYearChart();\n\trenderTopBrowsersChart();\n\trenderTopCountriesChart();\n\tnewVsReturning();\n\tgaReferral();\n\n\tfunction renderWeekOverWeekChart() {\n\t\tvar now = moment();\n\t\tvar thisWeek = query({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:date,ga:nthDay',\n\t\t\t'metrics': 'ga:users',\n\t\t\t'start-date': moment(now).subtract(1, 'day').day(0).format('YYYY-MM-DD'),\n\t\t\t'end-date': moment(now).format('YYYY-MM-DD')\n\t\t});\n\t\tvar lastWeek = query({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:date,ga:nthDay',\n\t\t\t'metrics': 'ga:users',\n\t\t\t'start-date': moment(now).subtract(1, 'day').day(0).subtract(1, 'week')\n\t\t\t\t\t.format('YYYY-MM-DD'),\n\t\t\t'end-date': moment(now).subtract(1, 'day').day(6).subtract(1, 'week')\n\t\t\t\t\t.format('YYYY-MM-DD')\n\t\t});\n\t\tPromise.all([thisWeek, lastWeek]).then(function (results) {\n\t\t\tvar data1 = results[0].rows.map(function (row) {\n\t\t\t\treturn +row[2];\n\t\t\t});\n\t\t\tvar data2 = results[1].rows.map(function (row) {\n\t\t\t\treturn +row[2];\n\t\t\t});\n\t\t\tvar labels = results[1].rows.map(function (row) {\n\t\t\t\treturn +row[0];\n\t\t\t});\n\t\t\tlabels = labels.map(function (label) {\n\t\t\t\treturn moment(label, 'YYYYMMDD').format('ddd');\n\t\t\t});\n\t\t\tvar data = {\n\t\t\t\tlabels: labels,\n\t\t\t\tdatasets: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Last Week',\n\t\t\t\t\t\tfillColor: 'rgba(200,200,200,0.5)',\n\t\t\t\t\t\tpointColor: 'rgba(150,150,150,1)',\n\t\t\t\t\t\tpointStrokeColor: '#fff',\n\t\t\t\t\t\tdata: data2\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'This Week',\n\t\t\t\t\t\tfillColor: 'rgba(100,100,100,0.5)',\n\t\t\t\t\t\tpointColor: 'rgba(65,65,65,1)',\n\t\t\t\t\t\tpointStrokeColor: '#fff',\n\t\t\t\t\t\tdata: data1\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\tnew Chart(makeCanvas('chart-1-container')).Line(data);\n\t\t\tgenerateLegend('legend-1-container', data.datasets);\n\t\t});\n\t}\n\n\tfunction renderYearOverYearChart() {\n\t\tvar now = moment();\n\t\tvar thisYear = query({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:month,ga:nthMonth',\n\t\t\t'metrics': 'ga:users',\n\t\t\t'start-date': moment(now).date(1).month(0).format('YYYY-MM-DD'),\n\t\t\t'end-date': moment(now).format('YYYY-MM-DD')\n\t\t});\n\t\tvar lastYear = query({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:month,ga:nthMonth',\n\t\t\t'metrics': 'ga:users',\n\t\t\t'start-date': moment(now).subtract(1, 'year').date(1).month(0)\n\t\t\t\t\t.format('YYYY-MM-DD'),\n\t\t\t'end-date': moment(now).date(1).month(0).subtract(1, 'day')\n\t\t\t\t\t.format('YYYY-MM-DD')\n\t\t});\n\t\tPromise.all([thisYear, lastYear]).then(function (results) {\n\t\t\tvar data1 = results[0].rows.map(function (row) {\n\t\t\t\treturn +row[2];\n\t\t\t});\n\t\t\tvar data2 = results[1].rows.map(function (row) {\n\t\t\t\treturn +row[2];\n\t\t\t});\n\t\t\tvar labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n\t\t\t\t'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\t\t\tfor (var i = 0, len = labels.length; i < len; i++) {\n\t\t\t\tif (data1[i] === undefined) data1[i] = null;\n\t\t\t\tif (data2[i] === undefined) data2[i] = null;\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\tlabels: labels,\n\t\t\t\tdatasets: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Last Year',\n\t\t\t\t\t\tfillColor: 'rgba(50,50,50,0.5)',\n\t\t\t\t\t\tdata: data2\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'This Year',\n\t\t\t\t\t\tfillColor: 'rgba(130,130,130,0.5)',\n\t\t\t\t\t\tdata: data1\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\tnew Chart(makeCanvas('chart-2-container')).Bar(data);\n\t\t\tgenerateLegend('legend-2-container', data.datasets);\n\t\t})\n\t\t.catch(function (err) {\n\t\t\tconsole.error(err.stack);\n\t\t});\n\t}\n\n\tfunction renderTopBrowsersChart() {\n\t\tquery({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:browser',\n\t\t\t'metrics': 'ga:pageviews',\n\t\t\t'sort': '-ga:pageviews',\n\t\t\t'max-results': 5\n\t\t})\n\t\t.then(function (response) {\n\t\t\tvar data = [];\n\t\t\tvar colors = ['#333333', '#555555', '#777777', '#999999', '#cccccc'];\n            if( typeof response.rows !== 'undefined' ){\n    \t\t\tresponse.rows.forEach(function (row, i) {\n    \t\t\t\tdata.push({value: +row[1], color: colors[i], label: row[0]});\n    \t\t\t});\n    \t\t\tnew Chart(makeCanvas('chart-3-container')).Doughnut(data);\n    \t\t\t\tgenerateLegend('legend-3-container', data);\n            }\n\t\t});\n\t}\n\n\tfunction renderTopCountriesChart() {\n\t\tquery({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:country',\n\t\t\t'metrics': 'ga:sessions',\n\t\t\t'sort': '-ga:sessions',\n\t\t\t'max-results': 5\n\t\t})\n\t\t.then(function (response) {\n\t\t\tvar data = [];\n\t\t\tvar colors = ['#333333', '#555555', '#777777', '#999999', '#cccccc'];\n            if( typeof response.rows !== 'undefined' ){\n\t\t\t    response.rows.forEach(function (row, i) {\n    \t\t\t\tdata.push({\n    \t\t\t\t\tlabel: row[0],\n    \t\t\t\t\tvalue: +row[1],\n    \t\t\t\t\tcolor: colors[i]\n    \t\t\t\t});\n    \t\t\t});\n    \t\t\tnew Chart(makeCanvas('chart-4-container')).Doughnut(data);\n    \t\t\tgenerateLegend('legend-4-container', data);\n            }\n\t\t});\n\t}\n\n\tfunction newVsReturning() {\n\t\tquery({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:userType',\n\t\t\t'metrics': 'ga:users'\n\t\t})\n\t\t.then(function (response) {\n\t\t\tlet $newUsers = document.querySelector('.new-users');\n\t\t\tlet $returningUsers = document.querySelector('.returning-users');\n            if( typeof response.rows !== 'undefined'){\n    \t\t\t$newUsers.innerHTML = response.rows[0][1];\n                if(  response.rows[1]){\n    \t\t\t    $returningUsers.innerHTML = response.rows[1][1];\n                }\n            }\n\t\t});\n\t}\n\n\tfunction gaReferral() {\n\t\tquery({\n\t\t\t'ids': ids,\n\t\t\t'dimensions': 'ga:sourceMedium',\n\t\t\t'metrics': 'ga:sessions',\n\t\t\t'sort': '-ga:sessions',\n\t\t\t'max-results': 10\n\t\t})\n\t\t.then(function (response) {\n\t\t\tlet li = '';\n            if( typeof response.rows !== 'undefined' ){\n    \t\t\tresponse.rows.forEach(function(v){\n    \t\t\t\tli += '<tr><td lass=\"medium-source\">'+v[0]+'</td><td class=\"medium-sesh\">'+v[1]+'</td></tr>';\n    \t\t\t});\n    \t\t\tlet $tableBody = document.querySelector('.top-ten-sources tbody');\n    \t\t\t$tableBody.innerHTML = li;\n            }\n\t\t});\n\t}\n\n\tfunction query(params) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar data = new gapi.analytics.report.Data({query: params});\n\t\t\tdata.once('success', function (response) {\n\t\t\t\tresolve(response);\n\t\t\t})\n\t\t\t.once('error', function (response) {\n\t\t\t\treject(response);\n\t\t\t})\n\t\t\t.execute();\n\t\t});\n\t}\n\n\tfunction makeCanvas(id) {\n\t\tvar container = document.getElementById(id);\n\t\tvar canvas = document.createElement('canvas');\n\t\tvar ctx = canvas.getContext('2d');\n\t\tcontainer.innerHTML = '';\n\t\tcanvas.width = '100%' //container.offsetWidth;\n\t\tcanvas.height = container.offsetHeight;\n\t\tcontainer.appendChild(canvas);\n\t\treturn ctx;\n\t}\n\n\tfunction generateLegend(id, items) {\n\t\tvar legend = document.getElementById(id);\n\t\tlegend.innerHTML = items.map(function (item) {\n\t\t\tvar color = item.color || item.fillColor;\n\t\t\tvar label = item.label;\n\t\t\treturn '<li><i style=\"background:' + color + '\"></i>' + label + '</li>';\n\t\t}).join('');\n\t}\n\n\tChart.defaults.global.animationSteps = 60;\n\tChart.defaults.global.animationEasing = 'easeInOutQuart';\n\tChart.defaults.global.responsive = true;\n\tChart.defaults.global.maintainAspectRatio = false;\n\twindow.dispatchEvent(new Event('resize'));\n});\n"],"names":["t","i","s","e","exports","n","id","loaded","call","m","c","p","gapi","analytics","ready","createComponent","initialize","this","activeUsers","auth","once","handleSignOut_","bind","execute","polling_","stop","render_","isAuthorized","pollActiveUsers_","clearTimeout","timeout_","emit","get","container","document","getElementById","innerHTML","template","querySelector","pollingInterval","isNaN","Error","client","data","realtime","ids","metrics","then","result","totalResults","rows","onChange_","setTimeout","delta","handleSignIn_","authorize","clientid","google_analytics_client_id","ext","ActiveUsers","timeout","firstChild","style","display","on","element","className","replace","now","thisWeek","lastWeek","query","params","Promise","resolve","reject","report","Data","response","makeCanvas","canvas","createElement","ctx","getContext","width","height","offsetHeight","appendChild","generateLegend","items","map","item","color","fillColor","label","join","set","moment","subtract","day","format","all","results","data1","row","data2","labels","datasets","pointColor","pointStrokeColor","Chart","Line","thisYear","date","month","lastYear","len","length","undefined","Bar","err","console","error","stack","renderYearOverYearChart","colors","forEach","push","value","Doughnut","$newUsers","$returningUsers","li","v","defaults","global","animationSteps","animationEasing","responsive","maintainAspectRatio","window","dispatchEvent","Event"],"sourceRoot":""}